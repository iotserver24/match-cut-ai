<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Match Cut Video Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../static/generalStyle.css">
    <link rel="stylesheet" href="../static/generalStyleForm.css">
    <style>
       

        
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Box (Optional, or integrate into form/status box) -->
        <div class="bento-box header-box">
            <h1>Text Match Cut Video Generator</h1>
            <div class="brand">Made by: R3AP3R editz</div>
             <a href="./api_docs.html" class="api-docs-btn">API Documentation</a>
        </div>
    
        <!-- Form Box -->
        <div class="bento-box form-box">
            <h2>Video Customization</h2>
            <form method="POST" action="{{ url_for('generate') }}" id="videoForm">
                <div class="form-group">
                    <label for="highlighted_text">Highlighted Text:</label>
                    <input type="text" id="highlighted_text" name="highlighted_text" value="Mother of Dragons" required>
                </div>
    
                <div class="form-group">
                    <label for="duration">Duration (seconds):</label>
                    <input type="number" id="duration" name="duration" value="5" min="1" max="30" required>
                </div>
    
                <div class="form-group">
                    <label for="fps">Frames Per Second (FPS):</label>
                    <input type="number" id="fps" name="fps" value="10" min="1" max="30" required>
                </div>
    
                <div class="form-group">
                    <label for="video_format">Video Format:</label>
                    <select id="video_format" name="video_format" onchange="updateResolution()">
                        <option value="custom">Custom Resolution</option>
                        <optgroup label="16:9 Formats">
                            <option value="4k">4K (3840x2160)</option>
                            <option value="2k">2K (2560x1440)</option>
                            <option value="1080p" selected>Full HD (1920x1080)</option>
                            <option value="720p">HD (1280x720)</option>
                            <option value="480p">SD (854x480)</option>
                        </optgroup>
                        <optgroup label="9:16 Formats (Vertical)">
                            <option value="1080p_vertical">Vertical Full HD (1080x1920)</option>
                            <option value="720p_vertical">Vertical HD (720x1280)</option>
                        </optgroup>
                        <optgroup label="1:1 Formats (Square)">
                            <option value="1080p_square">Square Full HD (1080x1080)</option>
                            <option value="720p_square">Square HD (720x720)</option>
                        </optgroup>
                    </select>
                </div>
    
                <div class="form-group">
                    <label for="width">Video Width (px):</label>
                    <input type="number" id="width" name="width" value="1920" min="256" max="4096" required>
                </div>
    
                <div class="form-group">
                    <label for="height">Video Height (px):</label>
                    <input type="number" id="height" name="height" value="1080" min="256" max="4096" required>
                </div>
    
                <div class="form-group">
                    <label for="highlight_color">Highlight Color:</label>
                    <input type="color" id="highlight_color" name="highlight_color" value="#00f7ff">
                </div>
    
                <div class="form-group">
                    <label for="text_color">Text Color:</label>
                    <input type="color" id="text_color" name="text_color" value="#ffffff">
                </div>
    
                <div class="form-group">
                    <label for="background_color">Background Color:</label>
                    <input type="color" id="background_color" name="background_color" value="#0a0a0a">
                </div>
    
                <div class="form-group">
                    <label for="blur_type">Blur Type:</label>
                    <select id="blur_type" name="blur_type">
                        <option value="gaussian">Gaussian</option>
                        <option value="radial" selected>Radial</option>
                        <option value="none">None</option>
                    </select>
                </div>
    
                <div class="form-group">
                    <label for="blur_radius">Blur Radius:</label>
                    <input type="number" id="blur_radius" name="blur_radius" value="4.0" step="0.1" min="0" max="50" required>
                </div>
                <button type="submit" id="generateButton">Generate Video</button>
                
            </form>
        </div>
        
    
        <!-- Status and Video Preview Box -->
        <div class="bento-box status-preview-box">
            <h2>Status & Preview</h2>
    
            <!-- Loading Indicator (Initially hidden by CSS) -->
            <div class="loading" id="loadingIndicator">
                <p>Generating video... This may take a minute or two.</p>
                <img src="https://i.gifer.com/ZZ5H.gif" alt="Loading...">
            </div>
    
            <!-- Error Message (Initially hidden or controlled by backend) -->
            {% if error %}
                <div class="error">
                    <strong>Error:</strong> {{ error }}
                </div>
            {% endif %}
    
            <!-- Result and Video Preview (Initially hidden or controlled by backend) -->
            {% if filename %}
                <div class="result">
                    <p>Video generated successfully!</p>
                    <div class="video-preview">
                        <video controls autoplay loop>
                            <source src="{{ url_for('download_file', filename=filename) }}" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    <a href="{{ url_for('download_file', filename=filename) }}" download class="download-btn">Download {{ filename }}</a>
                </div>
            {% endif %}
        </div>
    
    </div>

    <script>
        const form = document.getElementById('videoForm');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const submitButton = document.getElementById('generateButton');

        form.addEventListener('submit', function() {
            submitButton.disabled = true;
            submitButton.textContent = 'Generating...';
            loadingIndicator.style.display = 'block';
        });

        function updateResolution() {
            const format = document.getElementById('video_format').value;
            const widthInput = document.getElementById('width');
            const heightInput = document.getElementById('height');
            
            const resolutions = {
                '4k': [3840, 2160],
                '2k': [2560, 1440],
                '1080p': [1920, 1080],
                '720p': [1280, 720],
                '480p': [854, 480],
                '1080p_vertical': [1080, 1920],
                '720p_vertical': [720, 1280],
                '1080p_square': [1080, 1080],
                '720p_square': [720, 720],
                'custom': [widthInput.value, heightInput.value]
            };
            
            if (format !== 'custom') {
                widthInput.value = resolutions[format][0];
                heightInput.value = resolutions[format][1];
            }
        }

        // Add event listeners for width/height inputs
        document.getElementById('width').addEventListener('change', function() {
            document.getElementById('video_format').value = 'custom';
        });

        document.getElementById('height').addEventListener('change', function() {
            document.getElementById('video_format').value = 'custom';
        });
    </script>
</body>
</html>